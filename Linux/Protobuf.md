## Protobuf

### 优点

* 性能方面

  体积小

  * 序列化后，数据大小可缩小约3倍
  * 序列化速度快，比json、xml快
  * 传输速度快，因为体积小

* 使用方面

  * 使用简单

    protobuf编译器自动进行序列化和反序列化

  * 维护成本低

    多平台仅需维护一套对象协议文件(.proto)

  * 向后兼容好

    可拓展性好，不必破坏旧数据格式就可直接对数据结构进行更新

  * 加密行好

    http传输内容抓包只能抓到字节

* 使用范围方面

  跨平台，跨语言，可拓展性好

### 缺点

* 功能方面

  不适用于对基于文本的标记文档(如html)建模，因为文本不适合描述数据结构

* 其他方面

  * 通用性较差

    json、xml更流行

  * 自解释性差

    以二进制数据流方式进行存储(不可读)，需要通过.proto文件才能了解数据结构

### 使用

1. 编写.proto文件

2. 通过proto编译器生成`*.pb.cc和*.pb.h -> C++`

```sh
SRC_DIR=./
DST_DIR=./
#C++
mkdir -p $DST_DIR/cpp
protoc -l=$SRC_DIR --cpp_out=$DST_DIR $SRC_DIR/*.proto
--java_out
```

3. 引用`*.pb.cc和*.pb.h`

   