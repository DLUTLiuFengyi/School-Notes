## Install ubuntu and build network between vms

reference

https://blog.csdn.net/yamadeee/article/details/103600629

https://zhuanlan.zhihu.com/p/166348043



linux-live-server.iso attentions:

* when the new vm is installing, x represents yes
* 



[vm linux]

Keep the default network settings (NAT)

ping www.baidu.com

#### ssh.server

Watch whether install ssh.server

sudo service ssh start

sudo apt-get install openssh-server

Edit the properties, permit the root user to login by ssh
     a): sudo vi /etc/ssh/sshd_config
     b): PermitRootLogin prohibit-password --
     c): PermitRootLogin yes -- 添加
      d): :wq -- 保存

sudo service ssh restart



Watch vm ip addr

(sudo apt install net-tools)

ifconfig



[local windows]

ping 10.177.39.76



[vm linux]

Watch the user name for xshell login

who



[local windows]

Use xshell

ssh, ip, 22, liu 123456



## Begin Install k8s

reference 

https://blog.csdn.net/wangchunfa122/article/details/86529406



### Set basic network

[master01]

Disable swap

sudo swapoff -a

Meanwhile delete the line includes swap in /etc/fstab



Close firewall

sudo apt install firewalld

sudo systemctl stop firewalld

sudo systemctl disable firewalld



Disable selinux

sudo apt install selinux-utils

setenforce 0 (if display "...is disabled", means that selinux has been closed)



Set domain name

sudo vi /etc/hosts

192.168.100.128 master01

192.168.100.129 node01

192.168.100.131 node02



### Install Docker

Install relative tools

sudo apt-get update && sudo apt-get install -y apt-transport-https curl

Add secret key

sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -

Install docker

sudo apt-get install docker.io -y

Check docker version

sudo docker version

Start docker service

sudo systemctl enable docker

sudo systemctl start docker

sudo systemctl status docker

(use :q to quit the status info display)

Configure the aliyun mirror link

vim  /etc/docker/daemon.json 

```json
{    
	"registry-mirrors": ["https://alzgoonw.mirror.aliyuncs.com"],    
	"live-restore": true 
}
```

Note that the daemon.json file didn't exist before and will be create by us now.

Restart docker service

sudo systemctl daemon-reload

sudo systemctl restart docker

